import './polyfills.server.mjs';
import{c as B}from"./chunk-7PF3YECR.mjs";import{c as ee}from"./chunk-E6AKWN4V.mjs";import{a as T,b as $,e as j,i as ne,j as re}from"./chunk-M4V276LO.mjs";import"./chunk-ZL4DWXFO.mjs";import{C as ie,P as U}from"./chunk-TVE2QVOO.mjs";import{Ha as Xt,Jb as te,Kb as F,db as Zt,fa as Yt,ga as zt,pa as Qt,sa as qt,va as Jt,wa as Kt}from"./chunk-6XFVW6FJ.mjs";import{Db as Rt,Eb as ut,I as jt,S as W,U as Bt,Y as pt,cc as Pt,dc as Vt,e as lt,f as At,fb as O,ha as Ht,l as E,m as Dt,n as S,na as dt,o as Ot,qb as Nt,qc as ht,rc as Gt,ua as mt,x as Ut,z as $t,zb as kt}from"./chunk-JYBAAKHA.mjs";import{$a as X,$b as et,Aa as z,Bd as Mt,Ca as Q,Fa as q,Ga as L,Gc as p,Hc as d,Id as bt,Ka as g,L as C,La as vt,Lc as st,Pb as u,Ra as J,Rb as c,S as D,Sa as v,T as yt,X as Lt,Xb as l,Yb as a,Za as Ct,Zb as St,_a as K,_b as tt,ac as Wt,bc as it,ca as Y,dc as nt,ec as h,gb as Et,l as xt,nc as Tt,oc as m,p as A,pc as wt,qc as I,rc as rt,vd as at,wb as o,wc as Ft,wd as ct,x as y,xa as x,xb as Z,y as gt,zc as ot}from"./chunk-4X4JD2BX.mjs";import"./chunk-GHFNAT2I.mjs";var he=["cx-wish-list-item",""],se=t=>({cxRoute:"product",params:t});function fe(t,n){if(t&1&&(l(0,"div",13)(1,"a",14),p(2,"cxUrl"),m(3),a()()),t&2){let e=h();o(),c("routerLink",d(2,2,ot(4,se,e.cartEntry.product))),o(2),wt(e.cartEntry.product==null?null:e.cartEntry.product.name)}}function Ie(t,n){if(t&1&&(l(0,"div",15),m(1),p(2,"cxTranslate"),a()),t&2){let e=h();o(),rt(" ",d(2,2,"cartItems.id")," ",e.cartEntry.product==null?null:e.cartEntry.product.code," ")}}function _e(t,n){if(t&1&&(l(0,"div",19),m(1),a()),t&2){let e=h().$implicit;o(),rt(" ",e.name,": ",e.value," ")}}function xe(t,n){if(t&1&&(l(0,"div",17),u(1,_e,2,2,"div",18),a()),t&2){let e=n.$implicit;o(),c("ngIf",e.name&&e.value)}}function ge(t,n){if(t&1&&(tt(0),u(1,xe,2,1,"div",16),et()),t&2){let e=h();o(),c("ngForOf",e.cartEntry.product==null||e.cartEntry.product.baseOptions[0]==null||e.cartEntry.product.baseOptions[0].selected==null?null:e.cartEntry.product.baseOptions[0].selected.variantOptionQualifiers)}}function ye(t,n){if(t&1&&(l(0,"div",23),m(1),a()),t&2){let e=h(2);o(),I(" ",e.cartEntry.basePrice==null?null:e.cartEntry.basePrice.formattedValue," ")}}function Le(t,n){if(t&1&&(l(0,"td",20)(1,"div",21),m(2),p(3,"cxTranslate"),a(),u(4,ye,2,1,"div",22),a()),t&2){let e=h();o(2),I(" ",d(3,2,"cartItems.itemPrice")," "),o(2),c("ngIf",e.cartEntry.basePrice)}}function ve(t,n){t&1&&Wt(0,24)}function Ce(t,n){t&1&&(l(0,"span",25),m(1),p(2,"cxTranslate"),a()),t&2&&(o(),I(" ",d(2,1,"addToCart.outOfStock")," "))}function Ee(t,n){if(t&1){let e=it();l(0,"button",26),p(1,"cxTranslate"),nt("click",function(){K(e);let r=h();return X(r.removeEntry(r.cartEntry))}),m(2),p(3,"cxTranslate"),a()}if(t&2){let e=h();c("cxAtMessage",d(1,3,"wishlist.itemRemoved"))("disabled",e.isLoading),o(2),I(" ",d(3,5,"common.remove")," ")}}function Se(t,n){if(t&1){let e=it();l(0,"tr",11),p(1,"async"),nt("remove",function(r){K(e);let w=h(3);return X(w.removeEntry(r))}),a()}if(t&2){let e=n.$implicit,i=h(3);c("cartEntry",e)("isLoading",d(1,2,i.loading$))}}function We(t,n){if(t&1&&(l(0,"table",3)(1,"caption",4),m(2),p(3,"cxTranslate"),a(),l(4,"thead")(5,"tr",5)(6,"th",6),m(7),p(8,"cxTranslate"),a(),l(9,"th",7),m(10),p(11,"cxTranslate"),a(),l(12,"th",8),m(13),p(14,"cxTranslate"),a()()(),l(15,"tbody",9),u(16,Se,2,4,"tr",10),a()()),t&2){let e=h().ngIf;o(2),I(" ",d(3,5,"wishlist.caption")," "),o(5),I(" ",d(8,7,"cartItems.description")," "),o(3),I(" ",d(11,9,"cartItems.itemPrice")," "),o(3),I(" ",d(14,11,"cartItems.actions")," "),o(3),c("ngForOf",e==null?null:e.entries)}}function Te(t,n){if(t&1&&(tt(0),u(1,We,17,13,"table",2),et()),t&2){let e=n.ngIf;h();let i=Tt(3);o(),c("ngIf",(e==null||e.entries==null?null:e.entries.length)>0)("ngIfElse",i)}}function we(t,n){t&1&&(l(0,"p",14),m(1),p(2,"cxTranslate"),a()),t&2&&(o(),I(" ",d(2,1,"wishlist.empty")," "))}function Fe(t,n){t&1&&(l(0,"h2"),m(1),p(2,"cxTranslate"),a()),t&2&&(o(),I(" ",d(2,1,"wishlist.empty")," "))}function Me(t,n){t&1&&u(0,we,3,3,"p",12)(1,Fe,3,3,"h2",13),t&2&&(c("cxFeature","a11yEmptyWishlistHeading"),o(),c("cxFeature","!a11yEmptyWishlistHeading"))}var be=(()=>{class t{constructor(e){this.productListItemContextSource=e,this.isLoading=!1,this.remove=new Et,ut("a11yCartItemsLinksStyles")}ngOnChanges(e){e?.cartEntry&&this.productListItemContextSource.product$.next(this.cartEntry.product)}removeEntry(e){this.remove.emit(e)}static{this.\u0275fac=function(i){return new(i||t)(Z(F))}}static{this.\u0275cmp=J({type:t,selectors:[["","cx-wish-list-item",""],["cx-wish-list-item"]],inputs:{isLoading:"isLoading",cartEntry:"cartEntry"},outputs:{remove:"remove"},features:[Ft([F,{provide:te,useExisting:F}]),Ct],attrs:he,decls:15,vars:12,consts:[["outOfStock",""],["role","cell"],[1,"cx-table-item-container"],["tabindex","-1",3,"routerLink"],["format","thumbnail",3,"container"],[1,"cx-info"],["class","cx-name",4,"ngIf"],["class","cx-code",4,"ngIf"],[4,"ngIf"],["role","cell","class","cx-price",4,"ngIf"],["role","cell",1,"cx-actions"],["cxInnerComponentsHost","",4,"ngIf"],["class","link cx-action-link cx-remove-btn",3,"cxAtMessage","disabled","click",4,"ngIf"],[1,"cx-name"],[1,"cx-link",3,"routerLink"],[1,"cx-code"],["class","cx-property",4,"ngFor","ngForOf"],[1,"cx-property"],["class","cx-label",4,"ngIf"],[1,"cx-label"],["role","cell",1,"cx-price"],[1,"cx-mobile-header"],["class","cx-value",4,"ngIf"],[1,"cx-value"],["cxInnerComponentsHost",""],[1,"cx-out-of-stock"],[1,"link","cx-action-link","cx-remove-btn",3,"click","cxAtMessage","disabled"]],template:function(i,r){i&1&&(l(0,"td",1)(1,"div",2)(2,"a",3),p(3,"cxUrl"),St(4,"cx-media",4),a(),l(5,"div",5),u(6,fe,4,6,"div",6)(7,Ie,3,4,"div",7),a()(),u(8,ge,2,1,"ng-container",8),a(),u(9,Le,5,4,"td",9),l(10,"td",10),u(11,ve,1,0,"ng-container",11)(12,Ce,3,3,"ng-template",null,0,st)(14,Ee,4,7,"button",12),a()),i&2&&(o(2),c("routerLink",d(3,8,ot(10,se,r.cartEntry.product))),o(2),c("container",r.cartEntry.product==null||r.cartEntry.product.images==null?null:r.cartEntry.product.images.PRIMARY),o(2),c("ngIf",r.cartEntry.product==null?null:r.cartEntry.product.name),o(),c("ngIf",r.cartEntry.product==null?null:r.cartEntry.product.code),o(),c("ngIf",r.cartEntry.product==null||r.cartEntry.product.baseOptions==null?null:r.cartEntry.product.baseOptions.length),o(),c("ngIf",r.cartEntry.basePrice),o(2),c("ngIf",r.cartEntry.updateable),o(3),c("ngIf",r.cartEntry.updateable))},dependencies:[Qt,at,ct,Jt,Yt,Ut,ht,Pt],encapsulation:2,changeDetection:0})}}return t})(),Ae=(()=>{class t{constructor(e){this.wishListFacade=e,this.wishList$=this.wishListFacade.getWishList(),this.loading$=this.wishListFacade.getWishListLoading(),ut("a11yVisibleFocusOverflows")}removeEntry(e){this.wishListFacade.removeEntry(e)}static{this.\u0275fac=function(i){return new(i||t)(Z(B))}}static{this.\u0275cmp=J({type:t,selectors:[["cx-wish-list"]],decls:4,vars:3,consts:[["emptyWishList",""],[4,"ngIf"],["role","table",4,"ngIf","ngIfElse"],["role","table"],[1,"cx-visually-hidden"],["role","row",1,"cx-item-list-header","cx-wish-list-header"],["role","columnheader",1,"cx-item-list-desc"],["role","columnheader",1,"cx-item-list-price"],["role","columnheader",1,"cx-item-list-actions"],[1,"cx-item-list-items"],["cx-wish-list-item","","role","row","class","cx-item-list-row cx-wish-list-item-row",3,"cartEntry","isLoading","remove",4,"ngFor","ngForOf"],["cx-wish-list-item","","role","row",1,"cx-item-list-row","cx-wish-list-item-row",3,"remove","cartEntry","isLoading"],["class","cx-empty-wish-list",4,"cxFeature"],[4,"cxFeature"],[1,"cx-empty-wish-list"]],template:function(i,r){i&1&&(u(0,Te,2,2,"ng-container",1),p(1,"async"),u(2,Me,2,2,"ng-template",null,0,st)),i&2&&c("ngIf",d(1,1,r.wishList$))},dependencies:[at,ct,kt,be,Mt,ht],encapsulation:2})}}return t})(),ae=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=v({type:t})}static{this.\u0275inj=L({providers:[jt({cmsComponents:{WishListComponent:{component:Ae,data:{composition:{inner:["ProductAddToCartComponent"]}},guards:[Nt]}}})],imports:[qt,bt,Gt,Xt,Kt,zt,$t,Zt,Vt,Rt]})}}return t})();var le="[Wish List] Create Wish List",De="[Wish List] Create Wish List Fail",M="[Wish List] Create Wish List Success",pe="[Wish List] Load Wish List",b="[Wish List] Load Wish List Success",Oe="[Wish List] Load Wish List Fail",H=class{constructor(n){this.payload=n,this.type=le}},ft=class extends W.EntitySuccessAction{constructor(n){super(T,n.cartId),this.payload=n,this.type=M}},It=class extends W.EntityFailAction{constructor(n){super(T,n.cartId,n.error),this.payload=n,this.type=De}},_t=class extends W.EntityLoadAction{constructor(n){super(T,n.cartId),this.payload=n,this.type=pe}},N=class extends W.EntitySuccessAction{constructor(n){super(T,n.cartId),this.payload=n,this.type=b}},k=class extends W.EntityFailAction{constructor(n){super(T,n.cartId,n.error),this.payload=n,this.type=Oe}};function Ue(t){return`wishlist${t}`}var ce=(()=>{class t{constructor(e,i,r,w){this.store=e,this.userAccountFacade=i,this.multiCartFacade=r,this.userIdService=w}createWishList(e,i,r){this.store.dispatch(new H({userId:e,name:i,description:r}))}getWishList(){return gt([this.getWishListId(),this.userAccountFacade.get(),this.userIdService.getUserId()]).pipe(Y(),z(([e,i,r])=>{!e&&r!==Bt&&i?.customerId&&this.loadWishList(r,i.customerId)}),C(([e])=>!!e),x(([e])=>this.multiCartFacade.getCart(e)))}loadWishList(e,i){this.store.dispatch(new _t({userId:e,cartId:Ue(i)}))}addEntry(e){this.getWishListIdWithUserId().subscribe(([i,r])=>this.multiCartFacade.addEntry(r,i,e,1))}removeEntry(e){this.getWishListIdWithUserId().subscribe(([i,r])=>this.multiCartFacade.removeEntry(r,i,e.entryNumber))}getWishListLoading(){return this.getWishListId().pipe(x(e=>this.multiCartFacade.isStable(e).pipe(y(i=>!i))))}getWishListId(){return this.multiCartFacade.getCartIdByType(U.WISH_LIST)}getWishListIdWithUserId(){return this.getWishListId().pipe(Y(),Q(this.userIdService.getUserId(),this.userAccountFacade.get()),z(([e,i,r])=>{!e&&r?.customerId&&this.loadWishList(i,r.customerId)}),C(([e])=>!!e),y(([e,i])=>[e,i]),Lt(1))}static{this.\u0275fac=function(i){return new(i||t)(g(lt),g(ee),g(ie),g(pt))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac})}}return t})(),$e=[ce,{provide:B,useExisting:ce}],je=(()=>{class t{constructor(e,i,r,w){this.actions$=e,this.cartConnector=i,this.userIdService=r,this.store=w,this.logger=vt(Ht),this.createWishList$=E(()=>this.actions$.pipe(S(le),y(s=>s.payload),x(s=>this.cartConnector.create(s.userId).pipe(x(_=>this.cartConnector.save(s.userId,_.code??"",s.name,s.description).pipe(x(f=>[new ft({cart:f,cartId:j(f,s.userId)})]),D(f=>A([new It({cartId:_.code??"",error:O(f,this.logger)})])))))))),this.loadWishList$=E(()=>this.actions$.pipe(S(pe),y(s=>s.payload),yt(s=>{let{userId:_,cartId:f}=s;return this.cartConnector.loadAll(_).pipe(x(R=>{let P=f,V=R.find(me=>me.name===P),G=[];return G.push(V?new N({cart:V,cartId:j(V,_)}):new H({userId:_,name:P})),G.push(new $.RemoveCart({cartId:P})),G}),D(R=>A([new k({cartId:f,error:O(R,this.logger)})])))}))),this.resetWishList$=E(()=>this.actions$.pipe(S(mt.LANGUAGE_CHANGE,mt.CURRENCY_CHANGE),Q(this.userIdService.getUserId(),this.store.pipe(C(s=>!!s.cart),At(re.getCartIdByTypeFactory(U.WISH_LIST)))),x(([,s,_])=>_?this.cartConnector.load(s,_).pipe(x(f=>[new N({cart:f??{},cartId:j(f,s)})]),D(f=>A([new k({cartId:_,error:O(f,this.logger)})]))):xt))),this.setWishListId$=E(()=>this.actions$.pipe(S(M,b),y(s=>{switch(s.type){case M:case b:return new $.SetCartTypeIndex({cartType:U.WISH_LIST,cartId:s.meta.entityId})}}),C(dt))),this.setWishListData$=E(()=>this.actions$.pipe(S(M,b),y(s=>{switch(s.type){case M:case b:return new $.SetCartData({cart:s.payload.cart,cartId:s.payload.cartId})}}),C(dt)))}static{this.\u0275fac=function(i){return new(i||t)(g(Dt),g(ne),g(pt),g(lt))}}static{this.\u0275prov=q({token:t,factory:t.\u0275fac})}}return t})(),Be=[je],He=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=v({type:t})}static{this.\u0275inj=L({imports:[Ot.forFeature(Be)]})}}return t})(),de=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=v({type:t})}static{this.\u0275inj=L({providers:[...$e],imports:[He]})}}return t})();var yi=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=v({type:t})}static{this.\u0275inj=L({imports:[ae,de]})}}return t})();export{yi as WishListModule};
