import{c as ae}from"./chunk-DLCMDZN6.js";import"./chunk-GKBE6IVR.js";import{$ as ie,Y as ee,_ as te,na as ne,sa as oe,va as re}from"./chunk-FKA4XEVN.js";import{$b as A,Ab as E,Bb as S,Bf as z,Cb as k,Cf as G,Db as I,Ea as T,Eb as f,Fa as C,Fb as h,Gc as j,Gd as H,I as L,Ob as R,R as F,Sa as r,Ta as W,Wb as s,Xb as _,bb as l,db as a,gg as J,hg as K,jb as p,kb as u,la as b,lb as x,mb as m,me as U,nb as g,pb as v,ra as w,rb as y,sb as o,sg as X,tg as Z,ua as M,uc as $,v as B,ve as Y,wd as N,wf as O,xf as q,ya as P,yd as Q,za as V,zc as D}from"./chunk-ZJZHXN4F.js";var ce=["addToWishlistButton"],se=["removeFromWishlistButton"],_e=()=>({cxRoute:"login"});function de(t,d){if(t&1){let e=v();p(0,"div")(1,"button",7,2),s(3,"async"),s(4,"cxTranslate"),y("click",function(){let c=T(e).ngIf,n=o(6);return C(n.remove(c))}),x(5,"cx-icon",8),p(6,"span",9),f(7),s(8,"cxTranslate"),u()()()}if(t&2){let e=o(6);r(),a("disabled",_(3,4,e.loading$))("cxAtMessage",_(4,6,"addToWishList.removedFromWishList")),r(4),a("type",e.iconTypes.HEART),r(2),h(_(8,8,"addToWishList.remove"))}}function pe(t,d){if(t&1){let e=v();p(0,"button",10,3),s(2,"async"),s(3,"cxTranslate"),y("click",function(){T(e);let c=o(5).ngIf,n=o();return C(n.add(c))}),x(4,"cx-icon",8),p(5,"span",9),f(6),s(7,"cxTranslate"),u()()}if(t&2){let e=o(6);a("disabled",_(2,4,e.loading$))("cxAtMessage",_(3,6,"addToWishList.addedToWishList")),r(4),a("type",e.iconTypes.EMPTY_HEART),r(2),h(_(7,8,"addToWishList.add"))}}function le(t,d){if(t&1&&(m(0),l(1,de,9,10,"div",5)(2,pe,8,10,"ng-template",null,1,A),g()),t&2){let e=I(3),i=o(2).ngIf,c=o(2).ngIf,n=o();r(),a("ngIf",n.getProductInWishList(c,i))("ngIfElse",e)}}function me(t,d){if(t&1){let e=v();p(0,"div")(1,"button",11),s(2,"async"),s(3,"cxTranslate"),y("click",function(){let c=T(e).ngIf,n=o(6);return C(n.remove(c))}),x(4,"cx-icon",8),p(5,"span",9),f(6),s(7,"cxTranslate"),u()()()}if(t&2){let e=o(6);r(),a("disabled",_(2,4,e.loading$))("cxAtMessage",_(3,6,"addToWishList.removedFromWishList")),r(3),a("type",e.iconTypes.HEART),r(2),h(_(7,8,"addToWishList.remove"))}}function ge(t,d){if(t&1){let e=v();p(0,"button",12),s(1,"async"),s(2,"cxTranslate"),y("click",function(){T(e);let c=o(5).ngIf,n=o();return C(n.add(c))}),x(3,"cx-icon",8),p(4,"span",9),f(5),s(6,"cxTranslate"),u()()}if(t&2){let e=o(6);a("disabled",_(1,4,e.loading$))("cxAtMessage",_(2,6,"addToWishList.addedToWishList")),r(3),a("type",e.iconTypes.EMPTY_HEART),r(2),h(_(6,8,"addToWishList.add"))}}function ue(t,d){if(t&1&&(m(0),l(1,me,8,10,"div",5)(2,ge,7,10,"ng-template",null,1,A),g()),t&2){let e=I(3),i=o(2).ngIf,c=o(2).ngIf,n=o();r(),a("ngIf",n.getProductInWishList(c,i))("ngIfElse",e)}}function xe(t,d){t&1&&(m(0),l(1,le,4,2,"ng-container",6)(2,ue,4,2,"ng-container",6),g()),t&2&&(r(),a("cxFeature","a11yLinkBtnsToTertiaryBtns"),r(),a("cxFeature","!a11yLinkBtnsToTertiaryBtns"))}function fe(t,d){if(t&1&&(m(0),l(1,xe,3,2,"ng-container",4),g()),t&2){let e=o(3);r(),a("ngIf",e.hasStock)}}function he(t,d){if(t&1&&(m(0),l(1,fe,2,1,"ng-container",4),s(2,"async"),g()),t&2){let e=o(2);r(),a("ngIf",_(2,1,e.wishListEntries$))}}function Te(t,d){if(t&1&&(m(0),l(1,he,3,3,"ng-container",5),s(2,"async"),g()),t&2){let e=o(),i=I(3);r(),a("ngIf",_(2,2,e.userLoggedIn$))("ngIfElse",i)}}function Ce(t,d){if(t&1&&(m(0),p(1,"a",13),s(2,"cxUrl"),x(3,"cx-icon",8),p(4,"span",9),f(5),s(6,"cxTranslate"),u()(),g()),t&2){let e=o(2);r(),a("routerLink",_(2,3,R(7,_e))),r(2),a("type",e.iconTypes.EMPTY_HEART),r(2),h(_(6,5,"addToWishList.anonymous"))}}function ve(t,d){if(t&1&&l(0,Ce,7,8,"ng-container",4),t&2){let e=o();a("ngIf",e.hasStock)}}var ye=(()=>{class t{constructor(e,i,c){this.wishListFacade=e,this.currentProductService=i,this.authService=c,this.product$=this.currentProductService.getProduct().pipe(L(U),b(n=>this.setStockInfo(n))),this.featureConfigService=M(O),this.userLoggedIn$=this.authService.isUserLoggedIn().pipe(b(n=>{n&&(this.wishListEntries$=this.getWishListEntries(),this.loading$=this.wishListFacade.getWishListLoading())})),this.hasStock=!1,this.iconTypes=ee,G("a11yVisibleFocusOverflows")}add(e){e.code&&(this.wishListFacade.addEntry(e.code),this.featureConfigService.isEnabled("a11yAddToWishlistFocus")&&this.restoreFocus())}remove(e){this.wishListFacade.removeEntry(e),this.featureConfigService.isEnabled("a11yAddToWishlistFocus")&&this.restoreFocus()}getProductInWishList(e,i){return i.find(n=>n.product?.code===e.code)}setStockInfo(e){this.hasStock=!!(e.stock&&e.stock.stockLevelStatus!=="outOfStock")}getWishListEntries(){return this.wishListFacade.getWishList().pipe(L(e=>!!e),B(e=>e.entries??[]))}restoreFocus(){this.loading$.pipe(L(e=>!e),F(1)).subscribe(()=>{this.removeFromWishlistButton?.nativeElement.focus()||this.addToWishlistButton?.nativeElement.focus()})}static{this.\u0275fac=function(i){return new(i||t)(W(ae),W(ne),W(Y))}}static{this.\u0275cmp=P({type:t,selectors:[["cx-add-to-wishlist"]],viewQuery:function(i,c){if(i&1&&(E(ce,5),E(se,5)),i&2){let n;S(n=k())&&(c.addToWishlistButton=n.first),S(n=k())&&(c.removeFromWishlistButton=n.first)}},decls:4,vars:3,consts:[["loginPrompt",""],["addItem",""],["removeFromWishlistButton",""],["addToWishlistButton",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"cxFeature"],[1,"btn","btn-tertiary","button-remove",3,"click","disabled","cxAtMessage"],["aria-hidden","true",3,"type"],[1,"button-text"],[1,"btn","btn-tertiary","button-add",3,"click","disabled","cxAtMessage"],[1,"btn","btn-link","button-remove","cx-action-link",3,"click","disabled","cxAtMessage"],[1,"btn","btn-link","button-add","cx-action-link",3,"click","disabled","cxAtMessage"],[1,"btn","btn-link","button-add-link","cx-action-link",3,"routerLink"]],template:function(i,c){i&1&&(l(0,Te,3,4,"ng-container",4),s(1,"async"),l(2,ve,1,1,"ng-template",null,0,A)),i&2&&a("ngIf",_(1,1,c.product$))},dependencies:[$,te,N,oe,q,D,X,J],encapsulation:2,changeDetection:0})}}return t})(),De=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=V({type:t})}static{this.\u0275inj=w({providers:[H({cmsComponents:{AddToWishListComponent:{component:ye}}})],imports:[j,Z,ie,Q,K,re,z]})}}return t})();export{ye as AddToWishListComponent,De as AddToWishListModule};
